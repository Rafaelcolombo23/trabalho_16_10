name: RelatÃ³rio de arquivos do repositÃ³rio

on:
  workflow_dispatch:

jobs:
  relatorio:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ§¾ Mostrar data e hora da execuÃ§Ã£o
        run: |
          echo "ðŸ“… Data e hora atual:"
          date

      - name: ðŸ‘¤ Mostrar usuÃ¡rio que iniciou o workflow
        run: |
          echo "ðŸ‘¤ UsuÃ¡rio que iniciou este workflow:"
          echo "${{ github.actor }}"

      - name: ðŸ“¦ Fazer checkout do repositÃ³rio
        uses: actions/checkout@v4

      - name: ðŸ” Contar arquivos HTML
        run: |
          total_html=$(find . -type f -name "*.html" | wc -l)
          echo "ðŸ§© Total de arquivos HTML: $total_html"

      - name: ðŸŽ¨ Contar arquivos CSS
        run: |
          total_css=$(find . -type f -name "*.css" | wc -l)
          echo "ðŸŽ¨ Total de arquivos CSS: $total_css"

      - name: âš™ï¸ Contar arquivos JavaScript
        run: |
          total_js=$(find . -type f -name "*.js" | wc -l)
          echo "âš™ï¸ Total de arquivos JS: $total_js"

      - name: ðŸ“ Gerar relatÃ³rio final
        run: |
          echo "RelatÃ³rio de AnÃ¡lise - $(date)" > relatorio.txt
          echo "UsuÃ¡rio que executou: ${{ github.actor }}" >> relatorio.txt
          echo "" >> relatorio.txt
          echo "Arquivos encontrados:" >> relatorio.txt
          echo "- HTML: $(find . -type f -name '*.html' | wc -l)" >> relatorio.txt
          echo "- CSS:  $(find . -type f -name '*.css' | wc -l)" >> relatorio.txt
          echo "- JS:   $(find . -type f -name '*.js' | wc -l)" >> relatorio.txt
          echo "" >> relatorio.txt
          echo "âœ… Fim da verificaÃ§Ã£o." >> relatorio.txt
          cat relatorio.txt

      - name: ðŸ“¤ Enviar relatÃ³rio como artefato
        uses: actions/upload-artifact@v4
        with:
          name: relatorio-de-arquivos
          path: relatorio.txt
